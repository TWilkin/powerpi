# save the queue so that retained messages are recalled on restart
persistence true
persistence_location /mosquitto/data
persistence_file mosquitto.db
retain_available true

# set the frequency of the save operation
autosave_interval 600

# ensure persistent clients expire
persistent_client_expiration 7d

# initialise the listener
listener 1883
allow_anonymous true

# set user permissions
user config
topic readwrite powerpi/config/#

user controller
topic read powerpi/config/#
topic readwrite powerpi/device/#
topic readwrite powerpi/event/#

user api
topic read powerpi/config/#
topic read powerpi/device/#
topic read powerpi/event/#
topic readwrite powerpi/device/+/change

user persistence
topic read powerpi/#

user sensor
topic read powerpi/config/#
topic readwrite powerpi/event/+/change
