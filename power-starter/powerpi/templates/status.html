<table>
    <tr>
        <th colspan="2">Device</th>
        {% if show_all %}
        <th>Type</th>
        {% endif %}
        <th>Status</th>
        <th></th>
    </tr>
    {% for device in devices %}
    {% if show_all or device.visible %}
    <tr id="{{ device.name }}">
        <td>
            {% if device.icon is not none %}
            <img src="{{ url_for('static', filename='devices/%s' % device.icon) }}" class="device" />
            {% endif %}
        </td>
        <td>{{ device.name }}</td>
        {% if show_all %}
        <td>{{ device.device_type }}</td>
        {% endif %}
        <td class="status">{{ device.status }}</td>
        <td>
            <a href="{{ 'javascript:activate(\"%s\", \"on\")' % device.name }}">on</a>
            <a href="{{ 'javascript:activate(\"%s\", \"off\")' % device.name }}">off</a>
        </td>
    </tr>
    {% endif %}
    {% endfor %}
</table>